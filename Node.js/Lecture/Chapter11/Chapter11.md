# 이미지 업로드 방법
> 사용자가 파일선택기를 통해 직접 이미지를 업로드 할수있음
1. 백앤드에서 Image파일을 다루는방법
2. 프론트엔드에서 백앤드 Image파일을 가져오는방법

## 백앤드에서 Multer를 사용하여 파일저장하기
- Node/Express 미들웨어로 멀티파트 폼 데이터 작업을 돕는 패키지이다
- 파일데이터 (이진데이터를  포함할수있다.)도 처리가 가능하다
  - JSON은 텍스트데이터만가능하다.
## 프론트앤드에서 파일 데이터 백앤드로 보내기
> 이미지와 같은 binary데이터는 JSON 파일로 전송이 불가능하다  
- new FormData()를 사용하여 해결
  - 요청시 Fetch API가 자동으로 올바른 헤더를 추가해주어 헤더추가 필요 x
- 코드예시 Auth.js 

## 백앤드에 가지고 있는 파일 클라이언트 전송해주는 미들웨어 설정
- 두번째 인자로 express.static()을 전달
  - 미들웨어를 반환하게 된다.
    - 요청한 파일을 반환하는 미들웨어이다

~~~ js 
// localhost:5001/uploads/image로 요청할시 (서버에있는 파일을 전달할떄 사용하는 미들웨어) //정적 경로로 지정
app.use('/uploads/images',express.static(path.join('uploads','images')))
~~~

## 파일삭제 하는 미들웨어 
> 파일 모듈의 unlink를 통해서 끊어줌
~~~ js
  // 이미지 삭제
  fs.unlink(imagePath,err=>{
    console.log(err)
  })
~~~

> 파일은 데이터베이스에 저장하면 과열되어 작업이 커지므로 로컬에만 저장하는것이 좋다.
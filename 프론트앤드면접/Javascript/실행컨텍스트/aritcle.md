# 자바스크립트의 작동원리 ? (V8엔진)

## 자바스크립트 엔진의 구조

1. Parser : Lexical Analysis (코드의 의미를 이해하기 위해 token이라는 작은 단위들로 코드를 쪼갠다) => High Level
2. AST : Parser에서 분해된 token들을 기반으로 Tree를 만든다 (추상구문트리)
3. AST를 기반으로 ByteCode와 Optimized Code로 변환된다 =>Low Level

## 인터프리터와 컴파일러 (용어정리)

1. 인터프리터 : 코드를 한줄 한줄 읽어내려가며 한줄씩 ByteCode로변환 (코드를 바로바로읽음)

- 한줄 한줄 변환하기 떄문에 , 실행속도가 빠르다 (자바스크립트에서 채택) (장점)
- 같은 코드를 여러번 반복하는 반복문의 경우, 같은 코드지만 코드를 계속 한줄한줄씩 반복해야되서 느려진다.(단점)

2. 컴파일러 : 한줄 한줄번역하지않고 파일 전체를 읽은뒤 , 코드의 의미를 해석하고 기계어로 컴파일해서 변환한다 (기계어로 변환해야 컴퓨터가 읽을수있음)

- 인터프리터와 달리 동일한 반복을 계속 하지않고 불필요한 반복을 제거하여 Optimiaziton함
- 코드를 바로 실행하지 않고 , 코드 실행 전 전체를 컴파일하는 과정이 필요하여 초기속도가 느림 (단점)

# JIT Compiler (v8엔진에서 사용)

> 자바스크립트의 인터프리터의 문제점을 해결하는 대안

1. AST를 통해 트리구조로 변환된 코드는 인터프리터에 전달된다
2. 인터프리터는 ByteCode로 변환
3. 인터프리터는 코드를 실시간으로 변환하면서 브라우저에게 지시하는동안 , 프로파일러는 입력받은 코드에서 최적화 할수 있는부분을 기록
4. 최적화가 가능한 부분을 찾으면 프로파일러는 이를 컴파일러에게 전달한다.
5. 인터프리터에 의해 실시간으로 구동되는 동안 최적화가 필요한부분을 컴파일러는 기계어로변환한다.
6. 컴파일러에 의해 최적화하여 변환된 기계어는 인터프리터에 변환된 ByteCode 대신에 대체된다
> 컴파일러가 인터프리터의 Optimization 문제를 해결 

# 참고

- https://soldonii.tistory.com/52

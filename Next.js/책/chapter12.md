# 인증과 사용자 세션 관리

## 12.1 인증과 사용자 세션

- 사용자 인증은 대개 사용자를 식별하고 해당 사용자가 특정 콘텐츠에 대해 가진 권한에 따라 읽기 쓰기 변경 삭제와 같은 작업을 허용하거나 막는것

1. 자격 증명 기반 인증

- 이메일 주소와 비밀번호를 사용 (사용자의 자격을 증명할수있는 비밀정보를 통해 사용자 식별)

2. 소셜로그인

- 페이스북 ,트위터 ,구글과 같은 계정을 사용하여 로그인

3. 비밀번호 없이 로그인

- medium 과 슬랙과 같이 사용자의 이메일로 소위 매직링크를보내서 비밀번호를 입력하지 않고도 인증 및 로그인 할수있게하는것

4. 싱글 사이온

- Okta와 같은 서비스를 사용해서 각기 다른 서비스에 고유한 자격증명을 발급하고 중앙에서 사용자 인증을 처리

스테이풀 세션 : 로그인한 사용자 세션에 사용자 이메일 또는 계정이름을 기록해두고 페이지를 렌더링할떄마다 이정보를 가져와서 사용

스테이트리스 세션

- 세션쿠키를 서버가 아닌 프런트엔드 쪽에 두고 새로운 요청을 보낼떄마다 사용자를 식별할수있는 정보를 함께 보내는 방식
- 로그인한 사용자가 백엔드에 요청을 보낼때마다 인증방식에 따라 인증에 필요한 정보를 HTTP헤더 또는 쿠키로 보내는것

=> JWT 기반인증

## 12.2 JSON web token

- JWT는 base64방식으로 인코딩 된 세개의 JSON데이터를 하나로 연결한것 (첫번쨰부분 JWT헤더 , 두번쨰부분 페이로드 , 세번쨰부분 JWT토큰의 사인 즉 시그니처)
- 페이로드 = 누구나 볼수있어서 민감한 데이터를 절대 포함해서는 안됨

- JWT를 발행한 서버가 토큰의 사인을 만들떄 사용한 비밀값을 반드시 알아내야 풀수있는 장점

사용예시

```js
const jwt = require("jsonwebtoken");
const myToken = jwt.sign(
  {
    name: "Jane Doe",
    admin: false,
  },
  "secretpassword"
); //서명

const myToken = jwt.sign(
  {
    name: "Jane Doe",
    admin: false,
  },
  "secretpassword"
); //서명

const tokenvalue = jwt.verify(myToken, "secretpassword");
```

## 12.3 커스텀 인증
-

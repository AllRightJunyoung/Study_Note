# SEO 와 성능 관리

> Chapter10 에서 다룰 내용은 아래와같음

- SSR,SSG,CSR중 애플리케이션에 가장 잘맞는 렌더링 전략 방법
- 애플리케이션의 성능에 영향을 미치는 일반적인 원인
- Vercel Analytics 모듈 사용법
- SEO 친화적인 웹 애플리케이션 개발에 도움이 되는 도구

## 10.1 SEO와 성능

- 웹 프레임워크들이 복잡한 UI를 훨신 쉽고 간단하게 구현할수있는 환경을 제공해주었지만 웹사이트 정보를 수집하는 봇은 대부분의 컨텐츠를 볼수없게되었다 (CSR의 문제점)

## 10.2 SEO와 성능 관점에서의 렌더링 전략

- CSR은 하나의 자바스크립트 번들 형태로 배포되고 웹브라우저는 자바스크립트 번들전체를 다운한뒤 HTML 콘텐츠를 동적으로 만든다. => 사용자 경험은 좋아지나 SEO점수가 낮아짐

- SSR은 서버가 데이터를 불러오고 검사하기 떄문에 민감한 API 호출등을 숨길수있어 보안측면에서 좀 더 안전하며 SEO 점수가 높아짐 하지만 서버가 렌더링할시에는 서버 트래픽이 커질수록 유지보수 비용이 커진다.

- SSG : SEO 점수에서는 높지만 보안상 문제가 있으며 동적 컨텐츠생성이 어려움

> Next.js는 바로 각 페이지를 서버가 렌더링할지 , 빌드시점에 정적으로 만들지 전적으로 클라이언트에서 렌더링을 할지 정할수있음

활용 예시 :

1. 사진 서비스를 제공하는 웹사이트를 만든다 (사용자는 사진을 업로드하고 플랫폼의 다른 사용자로부터 피드백과 점수를 얻을수있다.)
   -> 이미지를 표시할 영역이 포함된 홈페이지를 정적 렌더링하고 이미지는 리액트 하이드레이션을 통해 클라이언트에서 가져옴. 홈페이지에서는 사용자가 로그인했는지 팔로우하는 사용자가 있는지 여부를 판단하여 이미지를 불러오고 동적으로 표시한다.
   => SSG와 CSR

## 동적 페이지에 SSG를 사용할떄의 장단점

- 빌드 시점에 만든 정적페이지의 경우 요청별로 서버가 다시 렌더링할 필요 가없어 서버의 부하가 줄어듬
- 정적페이지를 생성한 이후 사용자가 정적콘텐츠 일부를 수정하고 싶을때 언제 정적페이지를 다시 생성해야 할지 알수있고 정적 콘텐츠가 변경될경우 서버가 정적 증분 재생성을 주기적으로 실행해서 정적 페이지를 다시 만들수있음

- 페이지 성능이 뛰어남

- SEO 점수에 영향을 주지 않는 부분의 동적컨텐츠를 클라이언트가 데이터를 불러와서 렌더링할수있음

- fallback:true 속성을 추가하여 Next.js가 페이지 요청 시점에 새로운 페이지를 정적으로 만들수있음

- 단점으론 페이지 수가 많을수록 빌드시간이 길어진다

## 동적페이지에 SSR을 사용할 떄의 장단점

- SSG는 빌드 해야하는 정적페이지 수가 아주많으면 빌드시간이 오래걸리지만 SSR은 요청한 페이지를 그떄 그떄 렌더링하기때문에 페이지 빌드 시간이 짧아지고 배포 소유시간 또한 단축된다
- 구글과 같은 서비스는 SSR을 사용한다 (데이터가 너무많으므로)

## 프라이빗 라우트

- 프라이빗 페이지는 아무나 접근할수없고 중요한 정보가 담겨져있음 (사용자 이름 , 비밀번호 ,이메일 등)
- SSR을 이용하여 익명의 사용자가 접근 했는지 탐지하고 리다이렉트를 시킬수있다.

# 10.3 SEO 다루기

- 검색사이트에서 좋은 색인점수를 받기위해 웹사이트를 개발할떄 검색엔진 명세에 기초한 특정규칙을 반드시 지켜야한다

1. SEO 친화적인 라우팅 구조를 만든다.

- 블로그를 만들면 페이지 URL만가지고 페이지 콘텐츠를 식별할수있어야한다.

  - https://myblog.com/posts/1 은 잘못된 예시 (검색엔진 봇이URL의 의미를 파악하기 어렵다)
  - https://myblog.com/posts/how-to-deal-with-seo와 같은 형태의 URL이 좋다

- 페이지에서 정확하고 완성된 메타데이터를 제공한다

  - next-seo와 같은라이브러리 사용

- 이미지를 최적화한다 (FCP 풀페인트와 같은 SEO지표를 반영)

- 적절한 사이트맵을 만든다.

  - nextjs-sitemap-genrator를 통해 만들수있음
  - 사이트 맵은 콘텐츠 색인을 더 쉽게 만들수있게해준다.

- 올바른 HTML 태그를 사용한다.
  - 시맨틱태그나 텍스트 콘텐츠마다 올바른 태그를 사용

# 10.4 성능 다루기

- Next.js로 만든 정적 웹사이트를 Cloudflare나 AWS cloudfront와 같은 CDN에 배포하면 성능 향상이 좋아짐
  > 반면 서버 사이드 렌더링 애플리케이션을 작고 저렴한 서버에 배포하면 들어오는 성능을 제대로 처리할수없어 나쁜성능을 보여주게 된다.

1. 최대 콘텐츠풀 페인트 (LCP)

- 불러오기 성능을 측정 (불러오기는 처음 페이지를 불러온뒤 2.5초이내에 이뤄져야한다)

2. 최초 입력 지연 (FID)

- 페이지와 상호작용이 가능한 상태까지 도달하는 시간 측정 (0.1초이내에 이뤄져야함)

3. 누적 레이아웃 이동

- 시각적 안정성을 나타내는 지표
  - 사진을 화면에 표시하면 레이아웃이 움직이게 되고 그런현상
    - 광고 배너나 위젯 같은 다양한 요소들도 포함


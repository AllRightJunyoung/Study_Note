# 쿠키 (중요)

> HTTP는 무상태 프로토콜이라 서버는 이전요청을 기억하지못하는데 이떄 쿠키를 활용한다 (쿠키에 사용자정보저장)

- Set-Cookie : 서버에서 클라이언트로 쿠키 전달 (응답)
- Cookie : 클라이언트가 서버에서 받은 쿠키를 저장하고 HTTP 요청시 서버로 전달
- 사용자 로그인 세션 관리시 사용 , 광고 정보트래킹시
- 쿠키 정보는 항상 서버에 전송 , 네트워크 추가 트래픽 유발 (최소한의정보만 사용 세션 id,인증토큰)
- 서버에 전송하지 않고 웹 브라우저 내부에 데이터를 저장하고싶으면 웹 스토리지를 참고한다.
- 보안에 민감한정보 저장 x

## 쿠키를 활용한 로그인 방식 (중요)

1. 웹브라우저는 user정보를 가지고 로그인을 한다.
2. 서버는 Set-Cookie로 클라이언트에게 user정보를 보낸다.
3. 웹브라우저는 쿠키저장소에 서버가 보낸 쿠키 (user정보) 를 저장한다
4. 로그인 이후에는 웹브라우저는 쿠키저장소에있는 user정보를 가져와 서버에 요청한다

## 쿠키에는 생명주기가 존재한다

- Set-Cookie=expires= 날짜 (만료일되면 삭제 )
- Set-Cookie=max-age=3600 (3600초 , 0이나 음수를 지정하면 쿠키가 삭제된다)
- 세션 쿠키 : 만료 날짜를 생략하면 브라우저 종료시 까지 유지
- 영속 쿠키 : 만료 날짜 입력시 해당날짜까지 유지

## 쿠키의 도메인 지정

- 도메인 명시 : 명시한 문서 기준 도메인과 서브 도메인도 포함 (domian=example.org) => dev.example.org도 접근가능해짐
- 도메인 생략시 : example.org에서만 쿠키를 접근할수있음

## 쿠키 경로 지정

- path=/home => 이경로를 포함한 하위 경로 페이지에만 쿠키 접근가능  (일반적으로 path=/루트로 지정)

## 쿠키 보안

- Secure 적용시 https인 경우에만 전송
- HttpOnly : XSS공격방지 ,자바스크립트에서 접근 불가해짐 , HTTP전송에만 사용
- SameSite : XSRF 공격방지 , 요청 도메인과 쿠키에 설정된 도메인 같은경우만 쿠키 전송
